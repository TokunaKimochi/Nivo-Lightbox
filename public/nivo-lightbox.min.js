!function(b,d,h){"use strict";var t,i="nivoLightbox",e={effect:"fade",theme:"default",keyboardNav:!0,clickOverlayToClose:!0,onInit:function(){},beforeShowLightbox:function(){},afterShowLightbox:function(t){},beforeHideLightbox:function(){},afterHideLightbox:function(){},onPrev:function(t){},onNext:function(t){},errorMessage:"The requested content cannot be loaded. Please try again later."},c=null;if((t=h.createElement("div")).setAttribute("ontouchstart","return"),"function"==typeof t.ontouchstart)var r="function"==typeof b.fn.hammer,v="object"==typeof b.mobile;function o(t,o){this.el=t,this.$el=b(this.el),this.options=b.extend({},e,o),this._defaults=e,this._name=i,this.init()}o.prototype={init:function(){var i=this;b("html").hasClass("nivo-lightbox-notouch")||b("html").addClass("nivo-lightbox-notouch"),"ontouchstart"in h&&b("html").removeClass("nivo-lightbox-notouch"),this.$el.on("click",function(t){i.showLightbox(t)}),this.options.keyboardNav&&b("body").off("keyup").on("keyup",function(t){var o=t.keyCode?t.keyCode:t.which;27==o&&i.destructLightbox(),37==o&&b(".nivo-lightbox-prev").trigger("click"),39==o&&b(".nivo-lightbox-next").trigger("click")}),this.options.onInit.call(this)},showLightbox:function(t){var i=this,e=this.$el;if(this.checkContent(e)){t.preventDefault(),this.options.beforeShowLightbox.call(this);var o=this.constructLightbox();if(o){var n=o.find(".nivo-lightbox-content");if(n){if(b("body").addClass("nivo-lightbox-body-effect-"+this.options.effect),this.processContent(n,e),this.$el.attr("data-lightbox-gallery")){var l=b('[data-lightbox-gallery="'+this.$el.attr("data-lightbox-gallery")+'"]'),a=function(t){t.preventDefault(),c="P",i.contentFrameOutEffect();var o=l.index(e);e=l.eq(o-1),b(e).length||(e=l.last()),setTimeout(function(){i.processContent(n,e),i.options.onPrev.call(this,[e])},250)},s=function(t){t.preventDefault(),c="N",i.contentFrameOutEffect();var o=l.index(e);e=l.eq(o+1),b(e).length||(e=l.first()),setTimeout(function(){i.processContent(n,e),i.options.onNext.call(this,[e])},250)};l.each(function(){var t=this.href;null!==t.match(/\.(jpeg|jpg|gif|png)$/i)&&b("<img>").attr("src",t)}),b(".nivo-lightbox-nav").show(),b(".nivo-lightbox-prev").off("click").on("click",a),r?b(".nivo-lightbox-content").hammer().on("swiperight",a):v&&b(h).on("swiperight",".nivo-lightbox-content",a),b(".nivo-lightbox-next").off("click").on("click",s),r?b(".nivo-lightbox-content").hammer().on("swipeleft",s):v&&b(h).on("swipeleft",".nivo-lightbox-content",s)}setTimeout(function(){o.addClass("nivo-lightbox-open"),i.options.afterShowLightbox.call(this,[o])},1)}}}},checkContent:function(t){var o=t.attr("href"),i=o.match(/(youtube|youtube-nocookie|youtu|vimeo)\.(com|be)\/(watch\?v=([\w-]+)|([\w-]+))/);return null!==o.match(/\.(jpeg|jpg|gif|png)$/i)||(!!i||("ajax"==t.attr("data-lightbox-type")||("#"==o.substring(0,1)&&"inline"==t.attr("data-lightbox-type")||"iframe"==t.attr("data-lightbox-type"))))},processContent:function(i,t){var e=this,o=t.attr("href"),n=o.match(/(youtube|youtube-nocookie|youtu|vimeo)\.(com|be)\/(watch\?v=([\w-]+)|([\w-]+))/),l=b(".nivo-lightbox-wrap");if(l.removeClass("nivo-lightbox-content-zoom-in-div").addClass("nivo-lightbox-content-zoom-out-div"),i.html("").addClass("nivo-lightbox-loading"),b("body").addClass("nivo-lightbox-anchorage-body"),this.isHidpi()&&t.attr("data-lightbox-hidpi")&&(o=t.attr("data-lightbox-hidpi")),null!==o.match(/\.(jpeg|jpg|gif|png)$/i)){var a=b("<img>",{src:o});a.one("load",function(){var t=b("<div />",{id:"nivo-lightbox-alive-flow-content",class:"nivo-lightbox-image"});t.append(a),i.html(t).removeClass("nivo-lightbox-loading"),l.removeClass("nivo-lightbox-content-zoom-out-div").addClass("nivo-lightbox-content-zoom-in-div"),b(d).resize(function(){l.removeClass("nivo-lightbox-content-zoom-out-div").addClass("nivo-lightbox-content-zoom-in-div")}),e.contentFrameInEffect(t),t.off("click").on("click",function(t){t.preventDefault(),l.hasClass("nivo-lightbox-content-zoom-in-div")?(l.removeClass("nivo-lightbox-content-zoom-in-div").addClass("nivo-lightbox-content-zoom-out-div"),b("#nivo-lightbox-alive-flow-content").addClass("nivo-lightbox-image-zoom-out-div")):(l.removeClass("nivo-lightbox-content-zoom-out-div").addClass("nivo-lightbox-content-zoom-in-div"),b("#nivo-lightbox-alive-flow-content").removeClass("nivo-lightbox-image-zoom-out-div"))})}).each(function(){this.complete&&b(this).trigger("load")}),a.on("error",function(){var t=b('<div class="nivo-lightbox-error"><p>'+e.options.errorMessage+"</p></div>");i.html(t).removeClass("nivo-lightbox-loading"),e.contentFrameInEffect(t)})}else if(n){var s="",h="nivo-lightbox-video";if("youtube"==n[1]&&(s="//www.youtube.com/embed/"+n[4],h="nivo-lightbox-youtube"),"youtube-nocookie"==n[1]&&(s=o,h="nivo-lightbox-youtube"),"youtu"==n[1]&&(s="//www.youtube.com/embed/"+n[3],h="nivo-lightbox-youtube"),"vimeo"==n[1]&&(s="//player.vimeo.com/video/"+n[3],h="nivo-lightbox-vimeo"),s){var c=b("<iframe>",{src:s,id:"nivo-lightbox-alive-flow-content",class:h,frameborder:0,vspace:0,hspace:0,scrolling:"auto"});i.html(c),c.on("load",function(){i.removeClass("nivo-lightbox-loading"),e.contentFrameInEffect(c)})}}else if("ajax"==t.attr("data-lightbox-type"))b.ajax({url:o,cache:!1,success:function(t){var o=b("<div />",{id:"nivo-lightbox-alive-flow-content",class:"nivo-lightbox-ajax"});o.append(t),i.html(o).removeClass("nivo-lightbox-loading"),o.outerHeight()<i.height()&&o.css({position:"relative",top:"50%","margin-top":-o.outerHeight()/2+"px"}),b(d).resize(function(){o.outerHeight()<i.height()&&o.css({position:"relative",top:"50%","margin-top":-o.outerHeight()/2+"px"})}),e.contentFrameInEffect(o)},error:function(){var t=b('<div class="nivo-lightbox-error"><p>'+e.options.errorMessage+"</p></div>");i.html(t).removeClass("nivo-lightbox-loading"),e.contentFrameInEffect(t)}});else if("#"==o.substring(0,1)&&"inline"==t.attr("data-lightbox-type"))if(b(o).length){var r=b("<div />",{id:"nivo-lightbox-alive-flow-content",class:"nivo-lightbox-inline"});r.append(b(o).clone().show()),i.html(r).removeClass("nivo-lightbox-loading"),r.outerHeight()<i.height()&&r.css({position:"relative",top:"50%","margin-top":-r.outerHeight()/2+"px"}),b(d).resize(function(){r.outerHeight()<i.height()&&r.css({position:"relative",top:"50%","margin-top":-r.outerHeight()/2+"px"})}),e.contentFrameInEffect(r)}else{var v=b('<div class="nivo-lightbox-error"><p>'+e.options.errorMessage+"</p></div>");i.html(v).removeClass("nivo-lightbox-loading"),e.contentFrameInEffect(r)}else{if("iframe"!=t.attr("data-lightbox-type"))return!1;var g=b("<iframe>",{src:o,id:"nivo-lightbox-alive-flow-content",class:"nivo-lightbox-item",frameborder:0,vspace:0,hspace:0,scrolling:"auto"});i.html(g),g.on("load",function(){i.removeClass("nivo-lightbox-loading"),e.contentFrameInEffect(g)})}if(t.attr("title")){var f=b("<span>",{class:"nivo-lightbox-title"});f.text(t.attr("title")),b(".nivo-lightbox-title-wrap").html(f)}else b(".nivo-lightbox-title-wrap").html("")},constructLightbox:function(){if(b(".nivo-lightbox-overlay").length)return b(".nivo-lightbox-overlay");var t=b("<div>",{class:"nivo-lightbox-overlay nivo-lightbox-theme-"+this.options.theme+" nivo-lightbox-effect-"+this.options.effect}),o=b("<div>",{class:"nivo-lightbox-wrap"}),i=b("<div>",{class:"nivo-lightbox-content"}),e=b('<a href="#" class="nivo-lightbox-nav nivo-lightbox-prev">Previous</a><a href="#" class="nivo-lightbox-nav nivo-lightbox-next">Next</a>'),n=b('<a href="#" class="nivo-lightbox-close" title="Close">Close</a>'),l=b("<div>",{class:"nivo-lightbox-title-wrap"});o.append(i),o.append(l),t.append(o),t.append(e),t.append(n),b("body").append(t);var a=this;return a.options.clickOverlayToClose&&t.on("click",function(t){(t.target===this||b(t.target).hasClass("nivo-lightbox-content")||b(t.target).hasClass("nivo-lightbox-image"))&&(a.destructLightbox(),b("body").removeClass("nivo-lightbox-anchorage-body"))}),n.on("click",function(t){t.preventDefault(),a.destructLightbox(),b("body").removeClass("nivo-lightbox-anchorage-body")}),t},destructLightbox:function(){this.options.beforeHideLightbox.call(this),b(".nivo-lightbox-overlay").removeClass("nivo-lightbox-open"),b(".nivo-lightbox-nav").hide(),b("body").removeClass("nivo-lightbox-body-effect-"+this.options.effect);b(".nivo-lightbox-prev").off("click"),b(".nivo-lightbox-next").off("click"),b(".nivo-lightbox-content").empty(),this.options.afterHideLightbox.call(this)},isHidpi:function(){return 1<d.devicePixelRatio||!(!d.matchMedia||!d.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),                              (min--moz-device-pixel-ratio: 1.5),                              (-o-min-device-pixel-ratio: 3/2),                              (min-resolution: 1.5dppx)").matches)},contentFrameOutEffect:function(){"P"===c?b("#nivo-lightbox-alive-flow-content").removeClass("nivo-lightbox-prev-content-effect nivo-lightbox-next-content-effect").addClass("nivo-lightbox-pre-prev-content-effect"):"N"===c&&b("#nivo-lightbox-alive-flow-content").removeClass("nivo-lightbox-prev-content-effect nivo-lightbox-next-content-effect").addClass("nivo-lightbox-pre-next-content-effect")},contentFrameInEffect:function(t){"P"===c?t.addClass("nivo-lightbox-prev-content-effect"):"N"===c&&t.addClass("nivo-lightbox-next-content-effect"),c=null}},b.fn[i]=function(t){return this.each(function(){b.data(this,i)||b.data(this,i,new o(this,t))})}}(jQuery,window,document);