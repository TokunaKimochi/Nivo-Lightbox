!function(t,o,i,e){"use strict";function n(o,i){this.el=o,this.$el=t(this.el),this.options=t.extend({},a,i),this._defaults=a,this._name=l,this.init()}var l="nivoLightbox",a={effect:"fade",theme:"default",keyboardNav:!0,clickOverlayToClose:!0,onInit:function(){},beforeShowLightbox:function(){},afterShowLightbox:function(t){},beforeHideLightbox:function(){},afterHideLightbox:function(){},onPrev:function(t){},onNext:function(t){},errorMessage:"The requested content cannot be loaded. Please try again later."},s=null;n.prototype={init:function(){var o=this;t("html").hasClass("nivo-lightbox-notouch")||t("html").addClass("nivo-lightbox-notouch"),"ontouchstart"in i&&t("html").removeClass("nivo-lightbox-notouch"),this.$el.on("click",function(t){o.showLightbox(t)}),this.options.keyboardNav&&t("body").off("keyup").on("keyup",function(i){var e=i.keyCode?i.keyCode:i.which;27==e&&o.destructLightbox(),37==e&&t(".nivo-lightbox-prev").trigger("click"),39==e&&t(".nivo-lightbox-next").trigger("click")}),this.options.onInit.call(this)},showLightbox:function(o){var i=this,e=this.$el,n=this.checkContent(e);if(n){o.preventDefault(),this.options.beforeShowLightbox.call(this);var l=this.constructLightbox();if(l){var a=l.find(".nivo-lightbox-content");if(a){if(t("body").addClass("nivo-lightbox-body-effect-"+this.options.effect),this.processContent(a,e),this.$el.attr("data-lightbox-gallery")){var h=t('[data-lightbox-gallery="'+this.$el.attr("data-lightbox-gallery")+'"]');t(".nivo-lightbox-nav").show(),t(".nivo-lightbox-prev").off("click").on("click",function(o){o.preventDefault(),s="P",i.contentFrameOutEffect();var n=h.index(e);e=h.eq(n-1),t(e).length||(e=h.last()),setTimeout(function(){i.processContent(a,e),i.options.onPrev.call(this,[e])},250)}),t(".nivo-lightbox-next").off("click").on("click",function(o){o.preventDefault(),s="N",i.contentFrameOutEffect();var n=h.index(e);e=h.eq(n+1),t(e).length||(e=h.first()),setTimeout(function(){i.processContent(a,e),i.options.onNext.call(this,[e])},250)})}setTimeout(function(){l.addClass("nivo-lightbox-open"),i.options.afterShowLightbox.call(this,[l])},1)}}}},checkContent:function(t){var o=t.attr("href"),i=o.match(/(youtube|youtu|vimeo)\.(com|be)\/(watch\?v=([\w-]+)|([\w-]+))/);return null!==o.match(/\.(jpeg|jpg|gif|png)$/i)?!0:i?!0:"ajax"==t.attr("data-lightbox-type")?!0:"#"==o.substring(0,1)&&"inline"==t.attr("data-lightbox-type")?!0:"iframe"==t.attr("data-lightbox-type")?!0:!1},processContent:function(i,e){var n=this,l=e.attr("href"),a=l.match(/(youtube|youtu|vimeo)\.(com|be)\/(watch\?v=([\w-]+)|([\w-]+))/),s=t(".nivo-lightbox-wrap");if(s.removeClass("nivo-lightbox-content-zoom-in-div").addClass("nivo-lightbox-content-zoom-out-div"),i.html("").addClass("nivo-lightbox-loading"),t("body").addClass("nivo-lightbox-anchorage-body"),this.isHidpi()&&e.attr("data-lightbox-hidpi")&&(l=e.attr("data-lightbox-hidpi")),null!==l.match(/\.(jpeg|jpg|gif|png)$/i)){var h=t("<img>",{src:l});h.one("load",function(){var e=t("<div />",{id:"nivo-lightbox-alive-flow-content","class":"nivo-lightbox-image"});e.append(h),i.html(e).removeClass("nivo-lightbox-loading"),s.removeClass("nivo-lightbox-content-zoom-out-div").addClass("nivo-lightbox-content-zoom-in-div"),t(o).resize(function(){s.removeClass("nivo-lightbox-content-zoom-out-div").addClass("nivo-lightbox-content-zoom-in-div")}),n.contentFrameInEffect(e),e.off("click").on("click",function(o){o.preventDefault(),s.hasClass("nivo-lightbox-content-zoom-in-div")?(s.removeClass("nivo-lightbox-content-zoom-in-div").addClass("nivo-lightbox-content-zoom-out-div"),t("#nivo-lightbox-alive-flow-content").addClass("nivo-lightbox-image-zoom-out-div")):(s.removeClass("nivo-lightbox-content-zoom-out-div").addClass("nivo-lightbox-content-zoom-in-div"),t("#nivo-lightbox-alive-flow-content").removeClass("nivo-lightbox-image-zoom-out-div"))})}).each(function(){this.complete&&t(this).trigger("load")}),h.on("error",function(){var o=t('<div class="nivo-lightbox-error"><p>'+n.options.errorMessage+"</p></div>");i.html(o).removeClass("nivo-lightbox-loading"),n.contentFrameInEffect(o)})}else if(a){var r="",c="nivo-lightbox-video";if("youtube"==a[1]&&(r="http://www.youtube.com/embed/"+a[4],c="nivo-lightbox-youtube"),"youtu"==a[1]&&(r="http://www.youtube.com/embed/"+a[3],c="nivo-lightbox-youtube"),"vimeo"==a[1]&&(r="http://player.vimeo.com/video/"+a[3],c="nivo-lightbox-vimeo"),r){var v=t("<iframe>",{src:r,id:"nivo-lightbox-alive-flow-content","class":c,frameborder:0,vspace:0,hspace:0,scrolling:"auto"});i.html(v),v.on("load",function(){i.removeClass("nivo-lightbox-loading"),n.contentFrameInEffect(v)})}}else if("ajax"==e.attr("data-lightbox-type"))t.ajax({url:l,cache:!1,success:function(e){var l=t("<div />",{id:"nivo-lightbox-alive-flow-content","class":"nivo-lightbox-ajax"});l.append(e),i.html(l).removeClass("nivo-lightbox-loading"),l.outerHeight()<i.height()&&l.css({position:"relative",top:"50%","margin-top":-(l.outerHeight()/2)+"px"}),t(o).resize(function(){l.outerHeight()<i.height()&&l.css({position:"relative",top:"50%","margin-top":-(l.outerHeight()/2)+"px"})}),n.contentFrameInEffect(l)},error:function(){var o=t('<div class="nivo-lightbox-error"><p>'+n.options.errorMessage+"</p></div>");i.html(o).removeClass("nivo-lightbox-loading"),n.contentFrameInEffect(o)}});else if("#"==l.substring(0,1)&&"inline"==e.attr("data-lightbox-type"))if(t(l).length){var g=t("<div />",{id:"nivo-lightbox-alive-flow-content","class":"nivo-lightbox-inline"});g.append(t(l).clone().show()),i.html(g).removeClass("nivo-lightbox-loading"),g.outerHeight()<i.height()&&g.css({position:"relative",top:"50%","margin-top":-(g.outerHeight()/2)+"px"}),t(o).resize(function(){g.outerHeight()<i.height()&&g.css({position:"relative",top:"50%","margin-top":-(g.outerHeight()/2)+"px"})}),n.contentFrameInEffect(g)}else{var f=t('<div class="nivo-lightbox-error"><p>'+n.options.errorMessage+"</p></div>");i.html(f).removeClass("nivo-lightbox-loading"),n.contentFrameInEffect(g)}else{if("iframe"!=e.attr("data-lightbox-type"))return!1;var b=t("<iframe>",{src:l,id:"nivo-lightbox-alive-flow-content","class":"nivo-lightbox-item",frameborder:0,vspace:0,hspace:0,scrolling:"auto"});i.html(b),b.on("load",function(){i.removeClass("nivo-lightbox-loading"),n.contentFrameInEffect(b)})}if(e.attr("title")){var d=t("<span>",{"class":"nivo-lightbox-title"});d.text(e.attr("title")),t(".nivo-lightbox-title-wrap").html(d)}else t(".nivo-lightbox-title-wrap").html("")},constructLightbox:function(){if(t(".nivo-lightbox-overlay").length)return t(".nivo-lightbox-overlay");var o=t("<div>",{"class":"nivo-lightbox-overlay nivo-lightbox-theme-"+this.options.theme+" nivo-lightbox-effect-"+this.options.effect}),i=t("<div>",{"class":"nivo-lightbox-wrap"}),e=t("<div>",{"class":"nivo-lightbox-content"}),n=t('<a href="#" class="nivo-lightbox-nav nivo-lightbox-prev">Previous</a><a href="#" class="nivo-lightbox-nav nivo-lightbox-next">Next</a>'),l=t('<a href="#" class="nivo-lightbox-close" title="Close">Close</a>'),a=t("<div>",{"class":"nivo-lightbox-title-wrap"}),s=0;s&&o.addClass("nivo-lightbox-ie"),i.append(e),i.append(a),o.append(i),o.append(n),o.append(l),t("body").append(o);var h=this;return h.options.clickOverlayToClose&&o.on("click",function(o){(o.target===this||t(o.target).hasClass("nivo-lightbox-content")||t(o.target).hasClass("nivo-lightbox-image"))&&(h.destructLightbox(),t("body").removeClass("nivo-lightbox-anchorage-body"))}),l.on("click",function(o){o.preventDefault(),h.destructLightbox(),t("body").removeClass("nivo-lightbox-anchorage-body")}),o},destructLightbox:function(){var o=this;this.options.beforeHideLightbox.call(this),t(".nivo-lightbox-overlay").removeClass("nivo-lightbox-open"),t(".nivo-lightbox-nav").hide(),t("body").removeClass("nivo-lightbox-body-effect-"+o.options.effect);var i=0;i&&(t(".nivo-lightbox-overlay iframe").attr("src"," "),t(".nivo-lightbox-overlay iframe").remove()),t(".nivo-lightbox-prev").off("click"),t(".nivo-lightbox-next").off("click"),t(".nivo-lightbox-content").empty(),this.options.afterHideLightbox.call(this)},isHidpi:function(){var t="(-webkit-min-device-pixel-ratio: 1.5),                              (min--moz-device-pixel-ratio: 1.5),                              (-o-min-device-pixel-ratio: 3/2),                              (min-resolution: 1.5dppx)";return o.devicePixelRatio>1?!0:o.matchMedia&&o.matchMedia(t).matches?!0:!1},contentFrameOutEffect:function(){"P"===s?t("#nivo-lightbox-alive-flow-content").removeClass("nivo-lightbox-prev-content-effect nivo-lightbox-next-content-effect").addClass("nivo-lightbox-pre-prev-content-effect"):"N"===s&&t("#nivo-lightbox-alive-flow-content").removeClass("nivo-lightbox-prev-content-effect nivo-lightbox-next-content-effect").addClass("nivo-lightbox-pre-next-content-effect")},contentFrameInEffect:function(t){"P"===s?t.addClass("nivo-lightbox-prev-content-effect"):"N"===s&&t.addClass("nivo-lightbox-next-content-effect"),s=null}},t.fn[l]=function(o){return this.each(function(){t.data(this,l)||t.data(this,l,new n(this,o))})}}(jQuery,window,document);